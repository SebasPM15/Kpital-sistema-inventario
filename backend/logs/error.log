{"code":"NO_FILE_UPLOADED","level":"error","message":"[NO_FILE_UPLOADED] Debe proporcionar un archivo Excel","originalError":"Debe proporcionar un archivo Excel","stack":"Error: Debe proporcionar un archivo Excel\n    at refreshPredictions (file:///C:/Users/pilco/Documents/GitHub/Kpital/Kpital-sistema-inventario/backend/controllers/predictions.controller.js:43:61)\n    at Layer.handle [as handle_request] (C:\\Users\\pilco\\Documents\\GitHub\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\pilco\\Documents\\GitHub\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at done (C:\\Users\\pilco\\Documents\\GitHub\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\multer\\lib\\make-middleware.js:47:7)\n    at indicateDone (C:\\Users\\pilco\\Documents\\GitHub\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\multer\\lib\\make-middleware.js:51:68)\n    at Multipart.<anonymous> (C:\\Users\\pilco\\Documents\\GitHub\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\multer\\lib\\make-middleware.js:168:7)\n    at Multipart.emit (node:events:517:28)\n    at emitCloseNT (node:internal/streams/destroy:132:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:81:21)","timestamp":"2025-04-04T01:28:31.959Z"}
{"level":"error","message":"Error no manejado: MulterError: Unexpected field\n    at wrappedFileFilter (C:\\Users\\pilco\\Documents\\GitHub\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\multer\\index.js:40:19)\n    at Multipart.<anonymous> (C:\\Users\\pilco\\Documents\\GitHub\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\multer\\lib\\make-middleware.js:109:7)\n    at Multipart.emit (node:events:517:28)\n    at HeaderParser.cb (C:\\Users\\pilco\\Documents\\GitHub\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\busboy\\lib\\types\\multipart.js:358:14)\n    at HeaderParser.push (C:\\Users\\pilco\\Documents\\GitHub\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\busboy\\lib\\types\\multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (C:\\Users\\pilco\\Documents\\GitHub\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\busboy\\lib\\types\\multipart.js:394:37)\n    at feed (C:\\Users\\pilco\\Documents\\GitHub\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\streamsearch\\lib\\sbmh.js:200:10)\n    at SBMH.push (C:\\Users\\pilco\\Documents\\GitHub\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\streamsearch\\lib\\sbmh.js:104:16)\n    at Multipart._write (C:\\Users\\pilco\\Documents\\GitHub\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\busboy\\lib\\types\\multipart.js:567:19)\n    at writeOrBuffer (node:internal/streams/writable:392:12)","timestamp":"2025-04-04T01:31:51.183Z"}
{"code":"INTERNAL_SERVER_ERROR","level":"error","message":"[INTERNAL_SERVER_ERROR] Error interno del servidor","originalError":"Unexpected field","stack":"MulterError: Unexpected field\n    at wrappedFileFilter (C:\\Users\\pilco\\Documents\\GitHub\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\multer\\index.js:40:19)\n    at Multipart.<anonymous> (C:\\Users\\pilco\\Documents\\GitHub\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\multer\\lib\\make-middleware.js:109:7)\n    at Multipart.emit (node:events:517:28)\n    at HeaderParser.cb (C:\\Users\\pilco\\Documents\\GitHub\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\busboy\\lib\\types\\multipart.js:358:14)\n    at HeaderParser.push (C:\\Users\\pilco\\Documents\\GitHub\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\busboy\\lib\\types\\multipart.js:162:20)\n    at SBMH.ssCb [as _cb] (C:\\Users\\pilco\\Documents\\GitHub\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\busboy\\lib\\types\\multipart.js:394:37)\n    at feed (C:\\Users\\pilco\\Documents\\GitHub\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\streamsearch\\lib\\sbmh.js:200:10)\n    at SBMH.push (C:\\Users\\pilco\\Documents\\GitHub\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\streamsearch\\lib\\sbmh.js:104:16)\n    at Multipart._write (C:\\Users\\pilco\\Documents\\GitHub\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\busboy\\lib\\types\\multipart.js:567:19)\n    at writeOrBuffer (node:internal/streams/writable:392:12)","timestamp":"2025-04-04T01:31:51.183Z"}
{"level":"error","message":"Python Error: python: can't open file 'C:\\\\Users\\\\pilco\\\\Documents\\\\GitHub\\\\Kpital\\\\ai_model\\\\src\\\\predict.py': [Errno 2] No such file or directory\r\n","timestamp":"2025-04-04T01:32:00.801Z"}
{"level":"error","message":"Python Service Error: Script falló con código 2","timestamp":"2025-04-04T01:32:00.810Z"}
{"code":"ERROR_REFRESH_PREDICTIONS","level":"error","message":"[ERROR_REFRESH_PREDICTIONS] Script falló con código 2","originalError":"Script falló con código 2","stack":"Error: Script falló con código 2\n    at ChildProcess.<anonymous> (file:///C:/Users/pilco/Documents/GitHub/Kpital/Kpital-sistema-inventario/backend/services/python.service.js:59:28)\n    at ChildProcess.emit (node:events:517:28)\n    at maybeClose (node:internal/child_process:1098:16)\n    at ChildProcess._handle.onexit (node:internal/child_process:303:5)","timestamp":"2025-04-04T01:32:00.823Z"}
{"level":"error","message":"Python Error: python: can't open file 'C:\\\\Users\\\\pilco\\\\Documents\\\\GitHub\\\\Kpital\\\\ai_model\\\\src\\\\predict.py': [Errno 2] No such file or directory\r\n","timestamp":"2025-04-04T01:36:39.869Z"}
{"level":"error","message":"Python Service Error: Script falló con código 2","timestamp":"2025-04-04T01:36:39.878Z"}
{"code":"ERROR_REFRESH_PREDICTIONS","level":"error","message":"[ERROR_REFRESH_PREDICTIONS] Script falló con código 2","originalError":"Script falló con código 2","stack":"Error: Script falló con código 2\n    at ChildProcess.<anonymous> (file:///C:/Users/pilco/Documents/GitHub/Kpital/Kpital-sistema-inventario/backend/services/python.service.js:59:28)\n    at ChildProcess.emit (node:events:517:28)\n    at maybeClose (node:internal/child_process:1098:16)\n    at ChildProcess._handle.onexit (node:internal/child_process:303:5)","timestamp":"2025-04-04T01:36:39.890Z"}
{"level":"error","message":"Python Error: python: can't open file 'C:\\\\Users\\\\pilco\\\\Documents\\\\GitHub\\\\Kpital\\\\ai_model\\\\src\\\\predict.py': [Errno 2] No such file or directory\r\n","timestamp":"2025-04-04T01:39:13.043Z"}
{"level":"error","message":"Python Service Error: Script falló con código 2","timestamp":"2025-04-04T01:39:13.051Z"}
{"code":"ERROR_REFRESH_PREDICTIONS","level":"error","message":"[ERROR_REFRESH_PREDICTIONS] Script falló con código 2","originalError":"Script falló con código 2","stack":"Error: Script falló con código 2\n    at ChildProcess.<anonymous> (file:///C:/Users/pilco/Documents/GitHub/Kpital/Kpital-sistema-inventario/backend/services/python.service.js:59:28)\n    at ChildProcess.emit (node:events:517:28)\n    at maybeClose (node:internal/child_process:1098:16)\n    at ChildProcess._handle.onexit (node:internal/child_process:303:5)","timestamp":"2025-04-04T01:39:13.065Z"}
{"level":"error","message":"Python Error: usage: predict.py [-h] [--excel EXCEL] [--model MODEL]\r\n","timestamp":"2025-04-04T01:46:10.760Z"}
{"level":"error","message":"Python Error: predict.py: error: unrecognized arguments: --output C:\\Users\\pilco\\Documents\\GitHub\\Kpital\\Kpital-sistema-inventario\\ai_model\\data\r\n","timestamp":"2025-04-04T01:46:10.761Z"}
{"level":"error","message":"Python Service Error: Script falló con código 2","timestamp":"2025-04-04T01:46:10.941Z"}
{"code":"ERROR_REFRESH_PREDICTIONS","level":"error","message":"[ERROR_REFRESH_PREDICTIONS] Script falló con código 2","originalError":"Script falló con código 2","stack":"Error: Script falló con código 2\n    at ChildProcess.<anonymous> (file:///C:/Users/pilco/Documents/GitHub/Kpital/Kpital-sistema-inventario/backend/services/python.service.js:64:30)\n    at ChildProcess.emit (node:events:517:28)\n    at maybeClose (node:internal/child_process:1098:16)\n    at ChildProcess._handle.onexit (node:internal/child_process:303:5)","timestamp":"2025-04-04T01:46:10.956Z"}
{"code":"NOT_FOUND","level":"error","message":"[NOT_FOUND] Recurso no encontrado","originalError":"Ruta no encontrada: /api/health","stack":"Error: Ruta no encontrada: /api/health\n    at file:///D:/Programassss/Kpital/Kpital-sistema-inventario/backend/app.js:68:39\n    at Layer.handle [as handle_request] (D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at urlencodedParser (D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\body-parser\\lib\\types\\urlencoded.js:94:7)\n    at Layer.handle [as handle_request] (D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:286:9","timestamp":"2025-04-04T03:53:05.410Z"}
{"code":"PRODUCT_NOT_FOUND","level":"error","message":"[PRODUCT_NOT_FOUND] Producto no encontrado","originalError":"Producto con código refresh no encontrado","stack":"Error: Producto con código refresh no encontrado\n    at getPredictionByCode (file:///D:/Programassss/Kpital/Kpital-sistema-inventario/backend/controllers/predictions.controller.js:28:62)","timestamp":"2025-04-04T03:55:31.191Z"}
{"code":"PRODUCT_NOT_FOUND","level":"error","message":"[PRODUCT_NOT_FOUND] Producto no encontrado","originalError":"Producto con código refresh no encontrado","stack":"Error: Producto con código refresh no encontrado\n    at getPredictionByCode (file:///D:/Programassss/Kpital/Kpital-sistema-inventario/backend/controllers/predictions.controller.js:28:62)","timestamp":"2025-04-04T03:55:51.089Z"}
{"level":"error","message":"Python Error: Traceback (most recent call last):\r\n  File \"D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\ai_model\\src\\predict.py\", line 5, in <module>\r\n","timestamp":"2025-04-04T03:56:17.812Z"}
{"level":"error","message":"Python Error:     import numpy as np\r\nModuleNotFoundError: No module named 'numpy'\r\n","timestamp":"2025-04-04T03:56:17.815Z"}
{"level":"error","message":"Python Service Error: Script falló con código 1","timestamp":"2025-04-04T03:56:17.833Z"}
{"code":"ERROR_REFRESH_PREDICTIONS","level":"error","message":"[ERROR_REFRESH_PREDICTIONS] Script falló con código 1","originalError":"Script falló con código 1","stack":"Error: Script falló con código 1\n    at ChildProcess.<anonymous> (file:///D:/Programassss/Kpital/Kpital-sistema-inventario/backend/services/python.service.js:63:30)\n    at ChildProcess.emit (node:events:520:28)\n    at maybeClose (node:internal/child_process:1105:16)\n    at Socket.<anonymous> (node:internal/child_process:457:11)\n    at Socket.emit (node:events:520:28)\n    at Pipe.<anonymous> (node:net:337:12)","timestamp":"2025-04-04T03:56:17.837Z"}
{"level":"error","message":"Python Error: Traceback (most recent call last):\r\n  File \"D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\ai_model\\src\\predict.py\", line 12, in <module>\r\n","timestamp":"2025-04-04T03:59:49.607Z"}
{"level":"error","message":"Python Error:     from sklearn.metrics import mean_absolute_percentage_error\r\nModuleNotFoundError: No module named 'sklearn'\r\n","timestamp":"2025-04-04T03:59:49.610Z"}
{"level":"error","message":"Python Service Error: Script falló con código 1","timestamp":"2025-04-04T03:59:49.722Z"}
{"code":"ERROR_REFRESH_PREDICTIONS","level":"error","message":"[ERROR_REFRESH_PREDICTIONS] Script falló con código 1","originalError":"Script falló con código 1","stack":"Error: Script falló con código 1\n    at ChildProcess.<anonymous> (file:///D:/Programassss/Kpital/Kpital-sistema-inventario/backend/services/python.service.js:63:30)\n    at ChildProcess.emit (node:events:520:28)\n    at maybeClose (node:internal/child_process:1105:16)\n    at ChildProcess._handle.onexit (node:internal/child_process:305:5)","timestamp":"2025-04-04T03:59:49.726Z"}
{"level":"error","message":"Python Service Error: Script falló con código 1","timestamp":"2025-04-04T04:03:28.955Z"}
{"code":"ERROR_REFRESH_PREDICTIONS","level":"error","message":"[ERROR_REFRESH_PREDICTIONS] Script falló con código 1","originalError":"Script falló con código 1","stack":"Error: Script falló con código 1\n    at ChildProcess.<anonymous> (file:///D:/Programassss/Kpital/Kpital-sistema-inventario/backend/services/python.service.js:63:30)\n    at ChildProcess.emit (node:events:520:28)\n    at maybeClose (node:internal/child_process:1105:16)\n    at ChildProcess._handle.onexit (node:internal/child_process:305:5)","timestamp":"2025-04-04T04:03:28.958Z"}
{"level":"error","message":"Python Service Error: Script falló con código 1","timestamp":"2025-04-04T04:03:52.785Z"}
{"code":"ERROR_REFRESH_PREDICTIONS","level":"error","message":"[ERROR_REFRESH_PREDICTIONS] Script falló con código 1","originalError":"Script falló con código 1","stack":"Error: Script falló con código 1\n    at ChildProcess.<anonymous> (file:///D:/Programassss/Kpital/Kpital-sistema-inventario/backend/services/python.service.js:63:30)\n    at ChildProcess.emit (node:events:520:28)\n    at maybeClose (node:internal/child_process:1105:16)\n    at ChildProcess._handle.onexit (node:internal/child_process:305:5)","timestamp":"2025-04-04T04:03:52.789Z"}
{"code":"NOT_FOUND","level":"error","message":"[NOT_FOUND] Recurso no encontrado","originalError":"Ruta no encontrada: /api/predictions","stack":"Error: Ruta no encontrada: /api/predictions\n    at file:///D:/Programassss/Kpital/Kpital-sistema-inventario/backend/app.js:71:39\n    at Layer.handle [as handle_request] (D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:646:15\n    at next (D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:265:14)\n    at Function.handle (D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:47:12)","timestamp":"2025-04-04T04:07:56.008Z"}
{"code":"NOT_FOUND","level":"error","message":"[NOT_FOUND] Recurso no encontrado","originalError":"Ruta no encontrada: /api/predictions","stack":"Error: Ruta no encontrada: /api/predictions\n    at file:///D:/Programassss/Kpital/Kpital-sistema-inventario/backend/app.js:71:39\n    at Layer.handle [as handle_request] (D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:646:15\n    at next (D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:265:14)\n    at Function.handle (D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:47:12)","timestamp":"2025-04-04T04:08:10.343Z"}
{"code":"NOT_FOUND","level":"error","message":"[NOT_FOUND] Recurso no encontrado","originalError":"Ruta no encontrada: /api/predictions","stack":"Error: Ruta no encontrada: /api/predictions\n    at file:///D:/Programassss/Kpital/Kpital-sistema-inventario/backend/app.js:71:39\n    at Layer.handle [as handle_request] (D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at trim_prefix (D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:328:13)\n    at D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:286:9\n    at Function.process_params (D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:646:15\n    at next (D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:265:14)\n    at Function.handle (D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:175:3)\n    at router (D:\\Programassss\\Kpital\\Kpital-sistema-inventario\\backend\\node_modules\\express\\lib\\router\\index.js:47:12)","timestamp":"2025-04-04T04:09:17.958Z"}
{"code":"PRODUCT_NOT_FOUND","level":"error","message":"[PRODUCT_NOT_FOUND] Producto no encontrado","originalError":"Producto con código ART-001 no encontrado","stack":"Error: Producto con código ART-001 no encontrado\n    at getPredictionByCode (file:///D:/Programassss/Kpital/Kpital-sistema-inventario/backend/controllers/predictions.controller.js:28:62)","timestamp":"2025-04-04T04:10:47.678Z"}
